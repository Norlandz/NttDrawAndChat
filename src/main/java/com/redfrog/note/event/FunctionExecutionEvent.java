package com.redfrog.note.event;

import javax.persistence.DiscriminatorValue;
import javax.persistence.Entity;
import javax.persistence.Lob;

import org.springframework.util.SerializationUtils;

import com.redfrog.note.fundamental.NodeEvent;
import com.redfrog.note.fundamental.NodeSig;
import com.redfrog.note.serialization.SerializableMethod;

import javafx.scene.Node;
import lombok.NoArgsConstructor;

@Entity
@NoArgsConstructor
@DiscriminatorValue("FunctionExecutionEvent")
public class FunctionExecutionEvent extends NodeEvent {

  @Lob
  public SerializableMethod method_serializable;

  //__________________________________________________
  //____________________________________________________________________________
  //___________________________________________________________________________________________________________________________________________________________________________________________________________________________
  public transient Object[] args;

  @Lob
  public byte[] args_byte; //_________________________________________

  public transient Object ins_MethodOwner;
  public Class<?> clazz_ins_MethodOwner;

  //_________________________________________
  //__________________________________

  //______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
  //
  //______________________
  //______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
  //
  //_______________________________________________________________________________________________________________________________________________________________________________________
  //____________________
  //_____________________________________________________________
  //___________________________________________________
  //_________________________________________________________________________________
  //_________________________________________________________________
  //_______________________________________________________________________
  //___________________________________________________________________________
  //___

  //________________________________________________________________________________________________________________________________________________________________
  //______________________________________________________________________________________________________________________________
  //_________________________
  //____________________________________________________________________________________________________________________
  //_________________________________________________________________________________________________
  
  //___________________________________________________________________________________________________
  //____________________________________________________________________________________________________________________________________________________________________________________________________________
  public FunctionExecutionEvent(NodeSig nodeMain, SerializableMethod method_serializable, Object[] args, Object ins_MethodOwner, Class<?> clazz_ins_MethodOwner) {
    super(nodeMain);
    this.method_serializable   = method_serializable;
    this.args                  = args;
    this.args_byte             = SerializationUtils.serialize(args);
    this.ins_MethodOwner       = ins_MethodOwner;
    this.clazz_ins_MethodOwner = clazz_ins_MethodOwner;
    System.out.println("`Object[] args` this could fail on Serialization");
    if (args == null) { throw new Error(); }
    //_________________________________________________

    //________________
    //____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //__________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //__________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //___________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //____________________________________________________________________________
    //______________________________________________________________
    //__________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //__________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //__________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
    //_______________________________________________________________________________
    //__________________________________________________
    //__________________________________________________________________________________________________________
    //____________________________
    //_________________________________________________
    //________
    //______________________
    //____________________________________
    //_________________
    //________________________________________________________________
    //__________________________________________________________________________________________________________________
    //____________
    //________
    //_____________________________________________________________________________________
    //______________________
    //_________________________________________
    //_________________
    //________________________________________________________________
    //_______________________________________________________________________________________________________________________
    //____________
    //___________
    //_____________________________
    //___________________________________________
    //________________________
    //_______________________________________________________________________
    //_________________________________________________________________
    //_________________________________________________________________________________________
    //_____________________
    //______________________________________________________________________________________________________________________
    //___________________
    //_____________________________
    //___________________________________________
    //________________________
    //_______________________________________________________________________
    //___________________________________________________________________________________________________________________________
    //___________________
    //______________
    //_______________________________________
    //_________________________________________________
    //______________
    //_________________________________________________________________________________________
    //_______________________________________________________________
    //______________

  }

}