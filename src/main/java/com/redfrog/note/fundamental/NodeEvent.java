package com.redfrog.note.fundamental;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.JoinColumn;
import javax.persistence.OneToOne;
import javax.persistence.PostLoad;

import com.redfrog.note.util.SqlUtil;

//______________________________________________
//_________________________________________________________________________
//
//_________________
//__________________________________________________

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
//_______________________________________________
//___________________________________________________________________________________________
//___________________________________
public abstract class NodeEvent extends EventSig {
  //__________________________________________________________________________________________________________________________________________________________
  //_________________________________________

  //___
  //_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
  //_
  //__________________________________________________________________________________________________________________________________________________________________
  //___
  //__________________________________________________________________________________________________________________________
  //_
  //______________________________________
  //________
  //_________________________________________
  //___________________________________________
  //_______________________________________________
  @OneToOne(cascade = { CascadeType.PERSIST }) //__________________________________________
  @JoinColumn(name = "node_main_fk")
  public final NodeSig nodeMain;

  public NodeEvent(NodeSig nodeMain) {
    super();
    this.nodeMain = nodeMain;
  }

  /**
______________________
__*/
  //__________________________________________________________________________________________________________________
  protected NodeEvent() {
    super();
    this.nodeMain = null;
  }

  @Override
  public String toString() {
    if (nodeMain == null) {
      return "‘" + super.toString() + " :: " + null + "’";
    }
    else {
      return "‘" + super.toString() + " :: nodeMain.idSql=" + nodeMain.getIdSql() + " :: " + nodeMain.clazz_sqlDebug.getName() + "’";
    }
  }

  //_______
  @PostLoad
  public void setIdsqlToNull() { SqlUtil.setIdsqlToNull(this); }

}
